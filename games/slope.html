<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slope - AllPopularGames</title>
    <link rel="icon" href="../images/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon">
    
    <!-- DNS预解析和资源预连接 -->
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="//play.famobi.com">
    <link rel="dns-prefetch" href="//games.cdn.famobi.com">
    
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://play.famobi.com" crossorigin>
    <link rel="preconnect" href="https://games.cdn.famobi.com" crossorigin>
    
    <!-- 样式表 -->
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../scripts/game-loader.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        .game-page-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .game-header {
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .game-header img {
            width: 80px;
            height: 80px;
            border-radius: 10px;
            object-fit: cover;
        }
        
        .game-title h1 {
            margin: 0 0 5px 0;
            font-size: 24px;
        }
        
        .game-title p {
            margin: 0;
            color: var(--text-secondary);
        }
        
        .game-container {
            margin: 20px 0;
        }
        
        .game-description {
            margin: 30px 0;
            line-height: 1.6;
        }
        
        .game-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            background-color: var(--secondary-bg);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .detail-item {
            display: flex;
            flex-direction: column;
        }
        
        .detail-label {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-weight: 500;
        }
        
        .related-games {
            margin: 40px 0;
        }
        
        .related-games h2 {
            margin-bottom: 20px;
        }
        
        .related-games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .btn-back {
            display: inline-flex;
            align-items: center;
            padding: 8px 15px;
            background-color: var(--tertiary-bg);
            border-radius: 20px;
            color: var(--text-primary);
            text-decoration: none;
            font-size: 14px;
            transition: all 0.2s ease;
            margin-bottom: 20px;
        }
        
        .btn-back i {
            margin-right: 5px;
        }
        
        .btn-back:hover {
            background-color: var(--accent-blue);
            color: white;
        }
        
        @media (max-width: 768px) {
            .game-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .game-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
    
    <!-- 游戏加载器脚本 -->
    <script src="../scripts/game-loader.js" defer></script>
    <script src="../scripts/i18n.js"></script>

    <script>
      // 动态更新页面元数据以支持国际化
      function updatePageMetadata() {
        const lang = localStorage.getItem('preferred_language') || 'zh';
        const title = document.querySelector('title');
        const metaDesc = document.querySelector('meta[name="description"]');
        const metaKeywords = document.querySelector('meta[name="keywords"]');
        const ogTitle = document.querySelector('meta[property="og:title"]');
        const ogDesc = document.querySelector('meta[property="og:description"]');
        const twitterTitle = document.querySelector('meta[name="twitter:title"]');
        const twitterDesc = document.querySelector('meta[name="twitter:description"]');
        
        // 游戏基本信息
        const gameTitle = "Slope";
        const category = "Arcade";
        
        // 翻译映射
        const translations = {
          suffix: {
            zh: ' - 免费在线玩 - AllPopularGames',
            en: ' - Play Free Online - AllPopularGames'
          },
          description: {
            zh: '立即在线玩'+gameTitle+'，一款精彩的街机游戏。不需下载，即点即玩。',
            en: 'Play '+gameTitle+' online now, an exciting Arcade game. No download required, just click and play.'
          },
          keywords: {
            zh: gameTitle+', 街机, 免费游戏, 在线游戏, 休闲游戏, HTML5游戏',
            en: gameTitle+', Arcade, free games, online games, casual games, HTML5 games'
          }
        };
        
        // 更新标题和元数据
        if (title) title.textContent = gameTitle + translations.suffix[lang];
        if (metaDesc) metaDesc.content = translations.description[lang];
        if (metaKeywords) metaKeywords.content = translations.keywords[lang];
        if (ogTitle) ogTitle.content = gameTitle + translations.suffix[lang];
        if (ogDesc) ogDesc.content = translations.description[lang];
        if (twitterTitle) twitterTitle.content = gameTitle + (lang === 'zh' ? ' - 免费在线玩' : ' - Play Free Online');
        if (twitterDesc) twitterDesc.content = translations.description[lang];
      }
      
      // 页面加载和语言变化时更新元数据
      document.addEventListener('DOMContentLoaded', updatePageMetadata);
      window.addEventListener('languageChanged', updatePageMetadata);
      
      // 立即执行一次（如果DOM已经加载完成）
      if (document.readyState !== 'loading') {
        updatePageMetadata();
      }
    </script>
  
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <a href="../index.html">
                    <img src="../images/logo.png" alt="AllPopularGames Logo" width="40" height="40">
                    <h1>AllPopular<span>Games</span></h1>
                </a>
            </div>
            <a href="../index.html" class="btn-back">
                <i class="fas fa-home"></i> 返回首页
            </a>
        </div>
    </header>

    <main>
        <div class="game-page-container">
            <a href="../index.html" class="btn-back">
                <i class="fas fa-arrow-left"></i> 返回
            </a>
            
            <div class="game-header">
                <img src="https://img.cdn.famobi.com/portal/html5games/images/tmp/SlopeTeaser.jpg" alt="Slope">
                <div class="game-title">
                    <h1>Slope</h1>
                    <p>3D竞速 · 极限挑战</p>
                </div>
            </div>
            
            <!-- 游戏容器 - 将被游戏加载器使用 -->
            <div id="game-container" class="game-iframe-container"></div>
            
            <div class="game-description">
                <h2>游戏描述</h2>
                <p>
                    Slope是一款极具挑战性的3D单机游戏，您需要控制一个小球在不断下降的坡道上滚动。
                    这款游戏将您的反应速度和手眼协调能力推向极限，让您在极简而刺激的游戏体验中感受速度与挑战！
                </p>
                <p>
                    游戏特点:
                </p>
                <ul>
                    <li>紧张刺激的无尽跑酷玩法</li>
                    <li>简约而精美的3D视觉效果</li>
                    <li>由易到难的速度变化</li>
                    <li>随机生成的障碍物和坡道</li>
                    <li>全球排行榜挑战</li>
                </ul>
                <p>
                    您能在这款高难度游戏中坚持多久？挑战自我，测试您的反应速度和专注力，尝试在排行榜上创造记录！
                </p>
            </div>
            
            <div class="game-details">
                <div class="detail-item">
                    <span class="detail-label">类型</span>
                    <span class="detail-value">3D竞速, 极限挑战</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">平台</span>
                    <span class="detail-value">桌面, 移动设备</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">控制</span>
                    <span class="detail-value">键盘, 触摸</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">难度</span>
                    <span class="detail-value">高难度</span>
                </div>
            </div>
            
            <div class="related-games">
                <h2>相关游戏</h2>
                <div class="related-games-grid">
                    <div class="game-card" data-game-url="tower-crash-3d/A1000-10?ref=allpopulargames">
                        <div class="game-card-content">
                            <div class="game-thumbnail">
                                <img src="https://img.cdn.famobi.com/portal/html5games/images/tmp/TowerCrash3dTeaser.jpg" alt="Tower Crash 3D" loading="lazy">
                            </div>
                            <h3>Tower Crash 3D</h3>
                            <button class="play-button">Play Now</button>
                        </div>
                    </div>
                    
                    <div class="game-card" data-game-url="g-switch-3/A1000-10?ref=allpopulargames">
                        <div class="game-card-content">
                            <div class="game-thumbnail">
                                <img src="https://img.cdn.famobi.com/portal/html5games/images/tmp/GSwitch3Teaser.jpg" alt="G-Switch 3" loading="lazy">
                            </div>
                            <h3>G-Switch 3</h3>
                            <button class="play-button">Play Now</button>
                        </div>
                    </div>
                    
                    <div class="game-card" data-game-url="neon-rider/A1000-10?ref=allpopulargames">
                        <div class="game-card-content">
                            <div class="game-thumbnail">
                                <img src="https://img.cdn.famobi.com/portal/html5games/images/tmp/NeonRiderTeaser.jpg" alt="Neon Rider" loading="lazy">
                            </div>
                            <h3>Neon Rider</h3>
                            <button class="play-button">Play Now</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="../about.html">关于我们</a>
                <a href="../privacy.html">隐私政策</a>
                <a href="../terms.html">使用条款</a>
                <a href="../contact.html">联系我们</a>
            </div>
            <p class="copyright">&copy; 2024 AllPopularGames. 保留所有权利。</p>
        </div>
    </footer>

    <script>
        // 页面加载完成后，加载游戏
        document.addEventListener('DOMContentLoaded', function() {
            // 获取游戏容器元素
            const gameContainer = document.getElementById('game-container');
            
            // 创建游戏加载器并加载游戏
            const loader = new GameLoader('slope/A1000-10?ref=allpopulargames', gameContainer);
            loader.load();
        });
    </script>
    <script>
// 游戏页面国际化函数
// 游戏页面国际化函数模板
// 使用方式：将此文件中的代码复制到每个游戏页面，并替换游戏相关的描述文本
// 游戏页面国际化函数模板
// 使用方式：将此文件中的代码复制到每个游戏页面，并替换游戏相关的描述文本
// 游戏页面国际化函数模板
// 使用方式：将此文件中的代码复制到每个游戏页面，并替换游戏相关的描述文本
const GameI18N = {
  // 语言定义 - 针对游戏页面特定文本
  translations: {
    "zh": {
      "viewGame": "查看",
      "playNow": "开始游戏",
      "loading": "正在加载游戏，请稍候...",
      "fullscreen": "全屏模式",
      "relatedGames": "您可能也喜欢",
      "noRelatedGames": "暂无相关游戏",
      "loadFailed": "加载相关游戏失败",
      "loadingRelatedGames": "正在加载相关游戏...",
      "backToHome": "返回首页",
      "home": "首页",
      "aboutGame": "关于 Slope", // 需替换
      "gameFeatures": "游戏特点",
      "howToStart": "如何开始",
      "freeToPlay": "完全免费游玩",
      "noDownload": "无需下载，即点即玩",
      "deviceSupport": "支持电脑和手机设备",
      "beautifulGraphics": "精美的游戏画面",
      "simpleControls": "简单易懂的操作",
      "allAges": "适合所有年龄段玩家",
      "advertisement": "广告",
      "startInstruction": "点击上方的\"开始游戏\"按钮，即可立即体验《Slope》。游戏完全免费，无需下载，支持PC和移动设备。", // 需替换
      "copyright": "保留所有权利。",
      "aboutUs": "关于我们",
      "privacyPolicy": "隐私政策",
      "termsOfUse": "使用条款",
      "contactUs": "联系我们",
      "features": {
        "freeGame": "免费游戏",
        "online": "在线玩",
        "deviceFriendly": "全设备支持"
      },
      // 以下两项需要根据具体游戏替换
      "gameDescription": "《Slope》是一款精彩的游戏。一款有趣的在线游戏，随时随地畅玩。无需下载，直接在浏览器中即可开始游戏，支持电脑和手机设备。点击\"开始游戏\"立即体验！",
      "gameDetailedDescription": "《Slope》为玩家提供了精彩的游戏体验。这款游戏设计精良，玩法简单但富有深度，适合各年龄段的玩家。游戏画面精美，音效出色，为玩家创造了一个身临其境的游戏环境。"
    },
    "en": {
      "viewGame": "View",
      "playNow": "Play Now",
      "loading": "Loading game, please wait...",
      "fullscreen": "Fullscreen Mode",
      "relatedGames": "You May Also Like",
      "noRelatedGames": "No related games available",
      "loadFailed": "Failed to load related games",
      "loadingRelatedGames": "Loading related games...",
      "backToHome": "Back to Home",
      "home": "Home",
      "aboutGame": "About Slope", // 需替换
      "gameFeatures": "Game Features",
      "howToStart": "How to Start",
      "freeToPlay": "Completely free to play",
      "noDownload": "No download required, just click and play",
      "deviceSupport": "Supports PC and mobile devices",
      "beautifulGraphics": "Beautiful game graphics",
      "simpleControls": "Simple and intuitive controls",
      "allAges": "Suitable for players of all ages",
      "advertisement": "Advertisement",
      "startInstruction": "Click the \"Play Now\" button above to experience Slope immediately. The game is completely free, requires no download, and supports both PC and mobile devices.", // 需替换
      "copyright": "All Rights Reserved.",
      "aboutUs": "About Us",
      "privacyPolicy": "Privacy Policy",
      "termsOfUse": "Terms of Use",
      "contactUs": "Contact Us",
      "features": {
        "freeGame": "Free Game",
        "online": "Play Online",
        "deviceFriendly": "All Devices"
      },
      // 以下两项需要根据具体游戏替换
      "gameDescription": "Slope is an exciting  game. A fun online game that you can play anytime, anywhere. No download required, play directly in your browser, supports both PC and mobile devices. Click \"Play Now\" to experience it immediately!",
      "gameDetailedDescription": "Slope offers players an exciting gaming experience. This well-designed game has simple gameplay but great depth, suitable for players of all ages. With beautiful graphics and excellent sound effects, it creates an immersive gaming environment."
    }
  },
  
  // 当前语言（从localStorage获取）
  currentLang: localStorage.getItem('preferred_language') || 'en',
  
  // 获取翻译文本
  t(key) {
    // 支持点notation访问嵌套结构
    const keys = key.split('.');
    let result = this.translations[this.currentLang];
    
    for (const k of keys) {
      if (result && result[k] !== undefined) {
        result = result[k];
      } else {
        return key; // 如果找不到翻译，返回原始键
      }
    }
    
    return result;
  },
  
  // 更新页面上的游戏相关文本
  updateGamePageTexts() {
    console.log(`正在应用游戏页面翻译，当前语言: ${this.currentLang}`);
    
    // 更新游戏按钮
    const playButton = document.querySelector('.play-button');
    if (playButton) {
      playButton.innerHTML = `<i class="fas fa-play-circle"></i> ${this.t('playNow')}`;
    }
    
    // 更新游戏描述（红框中的区域）
    const gameDescriptionElement = document.querySelector('.game-description');
    if (gameDescriptionElement) {
      gameDescriptionElement.textContent = this.t('gameDescription');
    }
    
    // 更新详细游戏描述（第二个红框区域）
    const gameDetailedDescriptionElement = document.querySelector('.game-content-seo .seo-content > p:first-child');
    if (gameDetailedDescriptionElement) {
      gameDetailedDescriptionElement.textContent = this.t('gameDetailedDescription');
    }
    
    // 更新加载文本
    const loadingText = document.querySelector('.loading-overlay p');
    if (loadingText) {
      loadingText.textContent = this.t('loading');
    }
    
    // 更新面包屑导航
    const breadcrumbHome = document.querySelector('.breadcrumb li:first-child a');
    if (breadcrumbHome) {
      breadcrumbHome.textContent = this.t('home');
    }
    
    // 更新返回首页按钮
    const backBtn = document.querySelector('.btn-back');
    if (backBtn) {
      backBtn.innerHTML = `<i class="fas fa-home"></i> ${this.t('backToHome')}`;
    }
    
    // 更新相关游戏标题
    const relatedTitle = document.querySelector('.related-games h2');
    if (relatedTitle) {
      relatedTitle.textContent = this.t('relatedGames');
    }
    
    // 更新正在加载相关游戏的提示
    const loadingRelatedGames = document.querySelector('#related-games-container p');
    if (loadingRelatedGames && loadingRelatedGames.style.color === '#aaa') {
      loadingRelatedGames.textContent = this.t('loadingRelatedGames');
    }
    
    // 更新"关于游戏"标题
    const aboutTitle = document.querySelector('.game-content-seo h2');
    if (aboutTitle) {
      aboutTitle.textContent = this.t('aboutGame');
    }
    
    // 更新游戏特点标题
    const featuresTitle = document.querySelector('.game-content-seo h3:first-of-type');
    if (featuresTitle) {
      featuresTitle.textContent = this.t('gameFeatures');
    }
    
    // 更新如何开始标题
    const howToStartTitle = document.querySelector('.game-content-seo h3:nth-of-type(2)');
    if (howToStartTitle) {
      howToStartTitle.textContent = this.t('howToStart');
    }
    
    // 更新游戏特点列表
    const featuresList = document.querySelectorAll('.game-content-seo ul li');
    if (featuresList.length > 0) {
      const featureTexts = [
        this.t('freeToPlay'),
        this.t('noDownload'),
        this.t('deviceSupport'),
        this.t('beautifulGraphics'),
        this.t('simpleControls'),
        this.t('allAges')
      ];
      
      featuresList.forEach((item, index) => {
        if (index < featureTexts.length) {
          item.textContent = featureTexts[index];
        }
      });
    }
    
    // 更新如何开始说明
    const startInstructions = document.querySelector('.game-content-seo h3:nth-of-type(2) + p');
    if (startInstructions) {
      startInstructions.textContent = this.t('startInstruction');
    }
    
    // 更新广告标签
    const adLabel = document.querySelector('.ad-label');
    if (adLabel) {
      adLabel.textContent = this.t('advertisement');
    }
    
    // 更新特性文本
    document.querySelectorAll('.game-features .feature').forEach(feature => {
      const span = feature.querySelector('span');
      if (!span) return;
      
      const text = span.textContent.trim();
      if (text === '免费游戏' || text === 'Free Game') {
        span.textContent = this.t('features.freeGame');
      } else if (text === '在线玩' || text === 'Play Online') {
        span.textContent = this.t('features.online');
      } else if (text === '全设备支持' || text === 'All Devices') {
        span.textContent = this.t('features.deviceFriendly');
      }
    });
    
    // 更新页脚链接
    const footerLinks = document.querySelectorAll('footer .footer-links a');
    footerLinks.forEach(link => {
      if (link.textContent === '关于我们' || link.textContent === 'About Us') {
        link.textContent = this.t('aboutUs');
      } else if (link.textContent === '隐私政策' || link.textContent === 'Privacy Policy') {
        link.textContent = this.t('privacyPolicy');
      } else if (link.textContent === '使用条款' || link.textContent === 'Terms of Use') {
        link.textContent = this.t('termsOfUse');
      } else if (link.textContent === '联系我们' || link.textContent === 'Contact Us') {
        link.textContent = this.t('contactUs');
      }
    });
    
    // 更新版权信息
    const copyright = document.querySelector('.copyright');
    if (copyright) {
      copyright.textContent = `© ${new Date().getFullYear()} AllPopularGames. ${this.t('copyright')}`;
    }
    
    // 更新相关游戏卡片上的查看按钮
    document.querySelectorAll('.btn-small').forEach(btn => {
      if (btn.textContent === '查看' || btn.textContent === 'View') {
        btn.textContent = this.t('viewGame');
      }
    });
    
    console.log('游戏页面翻译完成');
  },
  
  // 监听语言变化并更新
  listenForLanguageChange() {
    window.addEventListener('languageChanged', (e) => {
      console.log(`检测到语言变更事件，新语言: ${e.detail.language}`);
      this.currentLang = e.detail.language;
      this.updateGamePageTexts();
    });
  },
  
  // 手动切换语言
  switchLanguage() {
    const newLang = this.currentLang === 'zh' ? 'en' : 'zh';
    console.log(`手动切换语言至: ${newLang}`);
    this.currentLang = newLang;
    localStorage.setItem('preferred_language', newLang);
    this.updateGamePageTexts();
    
    // 触发语言变更事件，通知其他组件
    window.dispatchEvent(new CustomEvent('languageChanged', { 
      detail: { language: newLang } 
    }));
    
    // 更新按钮文本
    const langBtn = document.querySelector('.btn-language');
    if (langBtn) {
      langBtn.textContent = newLang === 'zh' ? 'English' : '中文';
    }
  },
  
  // 初始化
  init() {
    console.log('初始化游戏页面国际化，当前语言：', this.currentLang);
    
    // 立即应用翻译
    this.updateGamePageTexts();
    
    // 监听语言变化
    this.listenForLanguageChange();
    
    // 为语言切换按钮添加事件
    const langBtn = document.querySelector('.btn-language');
    if (langBtn) {
      console.log('找到语言切换按钮，添加点击事件');
      // 移除可能存在的旧事件监听器
      langBtn.replaceWith(langBtn.cloneNode(true));
      
      // 重新获取按钮并添加事件
      const newLangBtn = document.querySelector('.btn-language');
      newLangBtn.addEventListener('click', () => this.switchLanguage());
      console.log('语言切换按钮事件已添加');
    } else {
      console.log('未找到语言切换按钮');
    }
  }
};

// 初始化游戏页面国际化
document.addEventListener('DOMContentLoaded', function() {
  console.log('DOM已加载完成，初始化游戏页面国际化');
  GameI18N.init();
}); ;

// 初始化游戏页面国际化
document.addEventListener('DOMContentLoaded', function() {
  console.log('DOM已加载完成，初始化游戏页面国际化');
  GameI18N.init();
}); ;

// 初始化游戏页面国际化
document.addEventListener('DOMContentLoaded', function() {
  console.log('DOM已加载完成，初始化游戏页面国际化');
  GameI18N.init();
}); 
</script>
</body>
</html>